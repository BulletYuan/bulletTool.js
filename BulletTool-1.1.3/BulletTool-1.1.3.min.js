'use strict';var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};var timestamp=function timestamp(){return new Date().getTime();};var timestamp_10=function timestamp_10(){return Math.floor(Number(timestamp())/1000);};var timeFormat=function timeFormat(){var ts=arguments[0]?arguments[0].timestamp:timestamp();var format=arguments[0]?arguments[0].format:"yyyy-mm-dd HH:MM:SS";if(Number(ts)<=9999999999)ts=Number(ts)*1000;var now=new Date(Number(ts));var year=now.getFullYear();var month=format.indexOf('mm')>=0&&now.getMonth()+1<10?"0"+(now.getMonth()+1):now.getMonth()+1;var date=format.indexOf('dd')>=0&&now.getDate()<10?"0"+now.getDate():now.getDate();var hour=format.indexOf('HH')>=0&&now.getHours()<10?"0"+now.getHours():now.getHours();var minute=format.indexOf('MM')>=0&&now.getMinutes()<10?"0"+now.getMinutes():now.getMinutes();var second=format.indexOf('SS')>=0&&now.getSeconds()<10?"0"+now.getSeconds():now.getSeconds();if(format.indexOf("yyyy")>=0)format=format.replace("yyyy",year);if(format.indexOf("mm")>=0)format=format.replace("mm",month);else format=format.replace("m",month);if(format.indexOf("dd")>=0)format=format.replace("dd",date);else format=format.replace("d",date);if(format.indexOf("HH")>=0)format=format.replace("HH",hour);else format=format.replace("H",hour);if(format.indexOf("MM")>=0)format=format.replace("MM",minute);else format=format.replace("M",minute);if(format.indexOf("SS")>=0)format=format.replace("SS",second);else format=format.replace("S",second);return format;};var urlParams={params:{},getParams:function getParams(){if((arguments[0]?arguments[0].url:window.location.search).indexOf('?')>=0){var a=(arguments[0]?arguments[0].url:window.location.search).split('?')[1].toString().replace(/=/g,':').replace(/&/g,',').toString();var b="";var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=a.split(',')[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var c=_step.value;b+="\""+c.split(':')[0]+"\":\""+c.split(':')[1]+"\",";}}catch(err){_didIteratorError=true;_iteratorError=err;}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return();}}finally{if(_didIteratorError){throw _iteratorError;}}}
this.params=JSON.parse('{'+b.substr(0,b.length-1)+'}');return this.params;}else return{};},toUrl:function toUrl(){var a=(arguments[0]||JSON.stringify(this.params)).replace(/{/g,'').replace(/}/g,'').replace(/:/g,'=').replace(/,/g,'&').replace(/\"|\'/g,'');return a;}};var cookie={cookies:{},toCookieString:function toCookieString(){var c=cookie.cookies||cookie.getCookies();c=JSON.stringify(c).replace(/:/g,'=').replace(/,/g,';');c=c.substring(1,c.length-1).toString();var b="";var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=c.split(';')[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var a=_step2.value;b+=a.substring(1,a.indexOf('=')-1)+"="+a.substring(a.indexOf('=')+2,a.length-1)+";";}}catch(err){_didIteratorError2=true;_iteratorError2=err;}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return();}}finally{if(_didIteratorError2){throw _iteratorError2;}}}
b=b.substr(0,b.length-1);return b;},getCookies:function getCookies(){var cstr=document.cookie.replace(/=/g,'@@@@').replace(/;/g,'~~~~').toString();var b="";var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=cstr.split('~~~~')[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var c=_step3.value;if(c&&c.indexOf('@@@@')>=0)b+="\""+c.split('@@@@')[0].trim()+"\":\""+c.split('@@@@')[1].trim()+"\",";}}catch(err){_didIteratorError3=true;_iteratorError3=err;}finally{try{if(!_iteratorNormalCompletion3&&_iterator3.return){_iterator3.return();}}finally{if(_didIteratorError3){throw _iteratorError3;}}}
cookie.cookies=JSON.parse('{'+b.substr(0,b.length-1).replace(/@@@@/g,':').replace(/~~~~/g,',')+'}');return cookie.cookies;},getCookie:function getCookie(name){var c=cookie.cookies||cookie.getCookies();return c[name];},setCookie:function setCookie(k,v,exdays){var d=new Date();d.setTime(d.getTime()+(exdays||1)*24*60*60*1000);var expires="expires="+d.toUTCString();document.cookie=k+'='+escape(v)+';'+expires;var c=cookie.getCookies();return c;},deleteCookie:function deleteCookie(name){return cookie.setCookie(name,'',-1);}};var ajax=function ajax(opts){opts=opts||{};if(opts.url){var xmlhttp=void 0;if(window.XMLHttpRequest)xmlhttp=new XMLHttpRequest();else xmlhttp=new ActiveXObject('Microsoft.XMLHTTP');var type=opts.type.toString().toUpperCase()||'GET';var url=opts.url||'';var dataType=opts.dataType?opts.dataType.toString().toUpperCase():'JSON';var async=opts.async||true;var data=opts.data||{};var header=opts.header||{};var success=opts.success||function(){};var error=opts.error||function(){};if(async){xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState===4&&xmlhttp.status===200){success(dataType==='JSON'?JSON.parse(xml.responseText):dataType==='XML'?xmlhttp.responseXML:xmlhttp.responseText,xmlhttp.status,xmlhttp.readyState);}else{error(xmlhttp.status,xmlhttp.readyState);}};}
xmlhttp.open(type,type==='GET'?url+"?"+ajax_obj2url(data)+"&_RandomMark="+Math.random():url,async);if(JSON.stringify(header).indexOf(':')>=0){var h=JSON.stringify(header).substr(1,JSON.stringify(header).length-2);var _iteratorNormalCompletion4=true;var _didIteratorError4=false;var _iteratorError4=undefined;try{for(var _iterator4=h.split(',')[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=true){var a=_step4.value;xmlhttp.setRequestHeader(a.split(':')[0].replace(/\"|\'/g,''),a.split(':')[1].replace(/\"|\'/g,''));}}catch(err){_didIteratorError4=true;_iteratorError4=err;}finally{try{if(!_iteratorNormalCompletion4&&_iterator4.return){_iterator4.return();}}finally{if(_didIteratorError4){throw _iteratorError4;}}}}
type==='POST'?xmlhttp.send(ajax_obj2url(data)):xmlhttp.send();if(!async){if(xmlhttp.readyState===4&&xmlhttp.status===200){success(dataType==='JSON'?JSON.parse(xml.responseText):dataType==='XML'?xmlhttp.responseXML:xmlhttp.responseText,xmlhttp.status,xmlhttp.readyState);}else{error(xmlhttp.status,xmlhttp.readyState);}}}
return this;};var ajax_obj2url=function ajax_obj2url(obj){if(obj)return JSON.stringify(obj).substr(1,JSON.stringify(obj).length-2).replace(/:/g,'=').replace(/,/g,'&').replace(/\"|\'/g,'');else return"";};var scrollPage=function scrollPage(){var dom=void 0,scorllUpFunc=void 0,scrollDownFunc=void 0;dom=document.getElementsByTagName('body').item(0);scorllUpFunc=function scorllUpFunc(){console.log('bottom of scroll-up for load');};scrollDownFunc=function scrollDownFunc(){console.log('top of scorll-down for refresh');};scrollingFunc=function scrollingFunc(){console.log('scrolling the page');};if(arguments[0]&&_typeof(arguments[0])==='object'&&_typeof(arguments[0].el)==='object')dom=arguments[0].el;if(arguments[0]&&arguments[0].scorllUp&&typeof arguments[0].scorllUp==='function')scorllUpFunc=arguments[0].scorllUp;if(arguments[0]&&arguments[0].scrollDown&&typeof arguments[0].scrollDown==='function')scrollDownFunc=arguments[0].scrollDown;if(arguments[0]&&arguments[0].scrolling&&typeof arguments[0].scrolling==='function')scrollingFunc=arguments[0].scrolling;dom.onscroll=function(event){var e=event||window.event;if(dom.scrollHeight-dom.clientHeight===dom.scrollTop){scorllUpFunc(e);}else if(dom.scrollTop===0){scrollDownFunc(e);}else{scrollingFunc(e);}};return this;};var zipImage=function zipImage(obj){if(!obj||!obj.imgSrc)return false;var img=new Image();img.src=obj.imgSrc;img.onload=function(){var w=img.width,h=img.height,scale=w/h;obj.width=w>800?w>1200?800:w/2:400;obj.height=w/scale;if(Number(obj.width)&&Number(obj.width)==Number(obj.width)){obj.height=w/scale;}
if(Number(obj.height)&&Number(obj.height)==Number(obj.height)){obj.width=h*scale;}
if(!obj.quality||obj.quality>1||obj.quality<=0)obj.quality=0.7;obj.fileType=obj.fileType||"jpeg";obj.done=obj.done||function(base64){};var canvas=document.createElement('canvas');var ctx=canvas.getContext('2d');var anw=document.createAttribute("width");anw.nodeValue=w;var anh=document.createAttribute("height");anh.nodeValue=h;canvas.setAttributeNode(anw);canvas.setAttributeNode(anh);ctx.drawImage(img,0,0,w,h);var base64=canvas.toDataURL('image/'+obj.fileType,obj.quality);obj.done(base64);};return this;};var toFileBlob=function toFileBlob(dataURI,type){if(dataURI){type=type||0;var arr=dataURI.split(','),mime=arr[0].match(/:(.*?);/)[1],bstr=atob(arr[1]),fileExt=mime.split('/')[1],n=bstr.length,u8arr=new Uint8Array(n);while(n--){u8arr[n]=bstr.charCodeAt(n);}
if(type<=0){return new Blob([u8arr],{type:mime});}else{return new File([u8arr],"file_"+Date.parse(new Date())+fileExt,{type:mime});}}
return this;};var bullet=function(){return{timestamp:timestamp,timestamp_10:timestamp_10,timeFormat:timeFormat,urlParams:urlParams,cookie:cookie,ajax:ajax,scrollPage:scrollPage,zipImage:zipImage,toFileBlob:toFileBlob};}();window.bullet=bullet;